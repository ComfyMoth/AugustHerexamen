# Deel 1: decimaal <-> binair
## De vorm van een IPv4-adres
- Binaire getallen bestaan uit 0 en 1
- IPv4-hosts maken gebruik van IPv4 adressen bestaan uit <span style="color:#c8ab83;">32 binaire bits</span>
- Voorbeeld van een IP4v-adres: `11000000101010000000000000000001`
- Deze voorstelling is moeilijk hanteerbaar in het dagelijks netwerkbeheer
- Binaire IPv4-adressen worden daarom omgezet naar hun decimale waarden
	- **stap 1**: Deel de 32 bits op in groepjes van 8 bits, gebruik als scheidingsteken het punt (.). Zo een groepje van <span style="color:#c8ab83;">8 bits</span> noemen we een <span style="color:#c8ab83;">octet</span>.
	- **stap 2**: Zet elk groepje van 8 bits (= octet) om naar een decimaal getal

## Omzetting decimaal <-> binair
**Stap 1**: Opsplitsen in octets (groepjes van 8) en scheiden door een punt
	`11000000.10101000.00000000.00000001`

**Stap 2**: Binair omzetten naar decimaal
	`11000000.10101000.00000000.00000001` = 192.168.0.1

## Omzetting binair -> decimaal
- vb. omzetting van het octet `11000000` naar een decimaal getal
	- Plaats in een tabel in elke kolom de macht van 2, gaande van 2²*0* tot 2²*7*
	- Plaats elke bit in de kolom die overeenkomt met zijn positie 
	- Van al de kolommen die een één (1) bevatten, tel je de machten van 2 bij elkaar op

| 2²7 | 2²6 | 2²5 | 2²4 | 2²3 | 2²  | 2²1 | 2²0 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 128 | 64  | 32  | 16  | 8   | 4   | 2   | 1   |
| 1   | 1   | 0   | 0   | 0   | 0   | 0   | 0   |

-  128 + 64 = 192
- De decimale waarde van `11000000` is 192

**NOTITIE**= ik heb geen idee hoe ik een macht, moet schrijven, dus ik schrijft 2² wanneer ik een macht bedoel
zoals: 2²0 is ![[Pasted image 20240712125704.png]]

## Omzetting decimaal -> binair
Omzetting van een decimaal getal naar een binair octet
- Plaats in een tabel in elke kolom de macht van 2, gaande van 2²0 tot 2²7
- Bepaal welke de grootste macht van 2 is die kleiner of gelijk is dan het om te zetten geale en plaats een één (1) in de overkomstige kolom
- Trek de gevonden macht van 2 van het om te zetten getal af
- Pas op het resultaat de voorgaande stappen opnieuw toe
- Herhaal voorgaande stappen tot het resultaat gelijk is aan nul (0)
- Vul de lege kolomen op met nullen (0)

**VOORBEELD**
omzetting van het getal 172 naar een binair octet
- plaats in een tabel in elke kolom de macht van 2, gaande van 2²0 tot 2²7
- Bepaal welke de grootste macht van 2 is die kleiner of gelik is dan het om te zetten getal en plaats een één (1) in de overeenkomstige kolom
- Trek de gevonden macht van 2 van het om te zetten getal af
- Pas op het resultaat de voorgaande stapen opnieuw toe

| 2²7 | 2²6 | 2²5 | 2²4 | 2²3 | 2²  | 2²1 | 2²0 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 128 | 64  | 32  | 16  | 8   | 4   | 2   | 1   |
| 1   |     |     |     |     |     |     |     |

- 172 - 128 = 44
- Herhaal deze stappen met getal 44

- Bepaal welke de grootste macht van 2 is die kleiner of gelijk is dan het vorige resultaat (44) en plaats een één (1) in de overeenkomstige kolom
- Trek de gevonden macht van 2 van het vorige resultaat af
- Pas op het resultaat de voorgaande stappen opnieuw toe

| 2²7 | 2²6 | 2²5 | 2²4 | 2²3 | 2²  | 2²1 | 2²0 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 128 | 64  | 32  | 16  | 8   | 4   | 2   | 1   |
| 1   |     | 1   |     |     |     |     |     |

- 44 - 32 = 12
- Herhaal deze stappen met getal 12

- Bepaal welke de grootste macht van 2 is die kleiner of gelijk is dan het vorige resultaat (12) en plaats een één (1) in de overeenkomstige kolom
- Trek de gevonden macht van 2 van het vorige resultaat af
- Pas op het resultaat de voorgaande stappen opnieuw toe 

| 2²7 | 2²6 | 2²5 | 2²4 | 2²3 | 2²  | 2²1 | 2²0 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 128 | 64  | 32  | 16  | 8   | 4   | 2   | 1   |
| 1   | 0   | 1   | 0   | 1   | 0   | 0   | 0   |
= de binaire waarden voor 172
- 4 - 4 = 0
- het resultaat is gelijk aan nul (0)
- Vul de lege kolommen op met nullen (0)

# Deel 2: Waarom IP adressen nodig zijn
*De router en de betekenis van adressen op laag 3*
Na dit deel:
- Weet je hoe routers een broadcast domain <span style="color:#c8ab83;">segmenteren</span>
- Weet je hoe router broadcast domains kunnen <span style="color:#c8ab83;">connecteren</span>
- Ken je de taak van een <span style="color:#c8ab83;">router</span>
- Weet je wat een <span style="color:#c8ab83;">default gateway</span> is
- Weet je wat het <span style="color:#c8ab83;">local broadcast adres</span> is

## Broadcast domain
- Broadcast = bericht dat naar iedereen gestuurd wordt
- broadcast krijg je als je een bericht stuurt naar het broadcast adres
- Alle <span style="color:#c8ab83;">intermediary devices</span>, **behalve de routers**, sturen data bestemd voor het <span style="color:#c8ab83;">het broadcast adres</span> verder over alle verbonden poorten
- <span style="color:#c8ab83;">Broadcast domain</span>: al de nodes die kunnen bereikt worden door data te zenden naar het broadcast adres
![[Pasted image 20240712163655.png]]

## Segmenteren van broadcast domains
- Om de impact van broadcasts te beperken gaan we het netwerk <span style="color:#c8ab83;">segmenteren</span>
![[Pasted image 20240712163731.png]]

- Om de negatieve impact van broadcasts te beperken kan men het netwerk <span style="color:#c8ab83;">segmenteren</span>. De broadcast blijft dan beperkt tot het netwerksegment van de zendende host
- Uiteraard moeten in het gesegmenteerde netwerk al de hosts nog met elkaar kunnen communiceren

- Met een router kunnen we de segmenten met elkaar verbinden
- Een router zal een broadcast, ontvangen op een poort, niet verder sturen over al de andere poorten
![[Pasted image 20240712164023.png]]

## Connecteren van broadcast domains
- <span style="color:#c8ab83;">Routeren</span> = pakketjes doorsturen tussen verschillende broadcast domains
- Routers kunnen enkel routeren als zij de broadcast domains van elkaar kunnen onderscheiden
- Elk broadcast domain moet daarom een identeit (=<span style="color:#c8ab83;">networkID</span>) krijgen
- Elk host kan nu aangeduid worden met een specifiek <span style="color:#c8ab83;">hostID</span> in een netwerk met een specifiek <span style="color:#c8ab83;">netwerkID</span>, vb.
	- HostID: Marie Vanderburcht, Meir 23
	- NetwerkID: 2000 Antwerpen
![[Pasted image 20240712164928.png]]
- Aan broadcast domains moeten we een <span style="color:#c8ab83;">netwerkID</span> toekennen
- aan alle hosts in een broadcast domain moeten we hetzelfde netwerkID + een uniek <span style="color:#c8ab83;">hostID</span> toekennen
	- De combinatie van networkID + hostID vormt het adres van de host
- <span style="color:#c8ab83;">networkID + hostID = 32 bits = IPv4 adres = L3 adres</span> (netwerklaag adres)
- Het IPv4 adres van een host moet <span style="color:#c8ab83;">uniek</span> zijn binnen het broadcast domain
- Samengevat:
	- **Een IPv4 adres bestaat uit 2 delen:**
		- **Een deel drukt uit in welk netwerk de host bevindt, het** <span style="color:#c8ab83;">NetworkID</span>
		- **Een ander deel zorgt dat de host een unieke ID in dit netwerk heeft, het** <span style="color:#c8ab83;">hostID</span>
	- **Een IPv4 adres van een host moet uniek zijn in het netwerk**

- Unicast die het broadcast domein wil verlaten, moeten via de router passeren
- Om communicatie van host A in het ene broadcast domain naar host B in het andere toe te laten, moet A weten langs welke routerpoort het netwerk moet verlaten worden
	- Elke host in een broadcast domain / netwerk moet zijn <span style="color:#c8ab83;">default gateway</span> kennen
	- Default gateway = het IP adres van de routerpoort waarlangs je het netwerk waartoe je behoort, kan verlaten
	- Het is de "poort naar andere netwerken"
	- Een host die zijn default gateway niet kent, kan niet buiten het eigen netwerk communiceren
- Het default gateway adres dat wordt ingesteld op een host, heeft hetzelfde networkID als de host zelf
	- <span style="color:#c8ab83;">NetworkID van het host IP adres = NetworkID van het default gateway IP adres</span>

- In het <span style="color:#ffb1af;">rode</span> netwerk (links)
	- De rode routerpoort moet een IPv4 adres hebben met het netwerkID van het rode netwerk
	- De NIC's van de hosts moeten een IPv4 adres hebben met het netwerkID van het rode netwerk
	- Ze moeten als default gateway het IPv4 adres van de rode routerinterface ingesteld krijgen
- In het <span style="color:#b4f0a8;">groene</span> netwerk (rechts)
	- De groene routerpoort moet een IPv4 adres hebben met het netwerkID van het rode netwerk
	- De NIC's van de hosts moeten een IPv4 adres hebben met het netwerkID van het groene netwerk
	- Ze moeten als default gateway het IPv4 adres van de groene routerinterface ingesteld krijgen
![[Pasted image 20240712170345.png]]

## Local broadcast-adres
- Het <span style="color:#c8ab83;">local broadcast-adres</span> is een bijzonder adres dat kan gebruikt worden om data te sturen naar al de netwerkinterfaces die verbonden zijn met dezelfde routerpoort als de zender
- Het local broadcast adres is het IP adres dat bestaat uit het networkID aangevuld met allemaal enen (1-en)
- Anders gezegd: het local broadcast adres is een adres waarin alle hostbits gelijk zijn aan 1
![[Pasted image 20240712170547.png]]

- Data gestuurd naar het <span style="color:#c8ab83;">local broadcast-adres</span> gaat naar alle nodes in hetzelfde <span style="color:#c8ab83;">broadcast domain</span> als de zender
- De bestemming van de verzonden data kan een netwerkprotocol op laag 2 t.e.m laag 4 van het [[02 Netwerkmodellen Stiuering netwerkcomponenten#Theoretische referentie ISO / OSI model|OSI]] model zijn
- De ontvangende nodes controleren de inhoud en verwerpen de data zodra ze ontdekken dat deze niet voor hun bedoeld is
- In een groot netwerk zonder routers gaat dit broadcastverkeer naar iedereen in het netwerk
- Routers worden gebruikt om dit verkeer in te dammen

- Veel IPv4 verkeer wordt verstuurd naar het local broadcast adres
- Als het networkID ook niet bekend is bij de zender, dan worden zelfs alle bits van het IP adres op 1 gezet om een broadcast te maken
- Enkele bekende voorbeelden:
	- DHCP (Dynamic Host Configuration Protocol)
		- DHCP-client wilt een verzoek sturen naar de DHCP server maar weet niet waar deze zit
		- => DHCP-client stuurt verzoek naar adres waarop iedereen ontvangt. Als er een DHCP server is, zal
	- ARP (Address Resolution Protocol)
		- Een IP-host kent L3-adres (IP adres) van bestemmeling wel, maar niet het bijhorende L2-adres (MAC adres) om in de L2 header in te vullen